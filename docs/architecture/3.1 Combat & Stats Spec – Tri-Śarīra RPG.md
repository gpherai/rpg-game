# 3.1 Combat & Stats Spec – Tri-Śarīra RPG

**Versie:** 0.1  
**Auteur:** Gerald (met Game Designer- & Architect-ondersteuning)  
**Status:** Design-spec. Tri-Śarīra details en formules zijn gedelegeerd aan de aparte *Tri-Śarīra System Spec*; dit document koppelt die stats aan concrete combat-ervaring.

---

## 1. Doel & scope

Dit document beschrijft **hoe gevechten werken** in Tri-Śarīra RPG én hoe de **stats** zich daarin gedragen.

Focus:

- De **combat-fantasie** (gevoel, tempo, focus).
- De **kernstats & resources** die in gevecht gebruikt worden.
- De **turn-structuur**, acties en basisregels (Fire Emblem-achtig grid, maar met Tri-Śarīra-laag).
- Een **v1-set aan formules** (simpel maar bruikbaar, in sync met Tri-Śarīra System Spec).
- Het onderscheid tussen **vertical slice** en **volledige game**.

Dit is een **design-document**: geen code, wel concreet genoeg dat Claude/Codex er data- en systeemimplementatie op kan baseren.

---

## 2. Combat-fantasie & designprincipes

### 2.1 Spelersfantasie

- Tactische gevechten op een **klein tot middelgroot grid** (SRPG-stijl).  
- Je voelt continu de spanning tussen **Body, Mind en Spirit**:
  - Fysieke aanvallen putten je **Stamina** uit.  
  - Mentale skills vragen **Focus** en beïnvloeden precisie, controle, debuffs.  
  - Spirituele skills gebruiken **Prāṇa** en voelen als rituelen, zegeningen of kosmische slagen.
- Elke unit heeft alle drie lagen, maar met eigen **accenten/profiel**.

### 2.2 Kernprincipes

1. **Leesbaar boven complex**  
   Formules zijn relatief eenvoudig; de speler moet vooral voelen: “meer Body = harder slaan”, “meer Spirit = sterkere rituelen”, etc.

2. **Tri-Śarīra zichtbaar in elke beurt**  
   - Acties zijn gelabeld: Physical / Mental / Spiritual.  
   - UI maakt duidelijk welke resource en stats gebruikt worden.

3. **Positie en keuze > raw stats**  
   - Grid, range, terrein en turn-volgorde zijn net zo belangrijk als getallen.  
   - “Goed staan” en de juiste lichamen aanspreken geeft voordeel.

4. **Geen vaste elementaire rock-paper-scissors**  
   - Geen Fire Emblem “sword > axe > lance”.  
   - Counters ontstaan via **gear**, **stance**, **resists** (Armor/Will/Faith) en context.

5. **Veilige baseline, later uitbreidbaar**  
   - Vertical slice gebruikt lineaire, vergevingsgezinde formules.  
   - Volledige game kan crits, status-effecten, complexere resources toevoegen.

---

## 3. Stats-overzicht (samenvatting)

De volledige lijst staat in de *Tri-Śarīra System Spec*; hier de subset die direct in combat gebruikt wordt.

### 3.1 Universeel

- **HP** – levenspunten (0 HP = KO).  
- **MOV** – movement op grid (aantal tiles per beurt).

### 3.2 Fysiek (Sthūla)

- **STR** – fysieke kracht (melee/ranged physical damage).  
- **END** – uithoudingsvermogen (Max HP + Stamina).  
- **DEF** – fysieke verdediging (reduceert Physical damage).  
- **SPD** – snelheid (initiative, evasive kans, acc-modifier).  
- **BodyControl** – later: springen/klimmen/physics checks (niet nodig voor slice).

### 3.3 Mentaal (Sūkṣma)

- **ACC** – Accuracy (raakkans voor aanvallen/skills).  
- **FOC** – mentale kracht (kwaliteit Mental skills).  
- **INS** – Insight (crit-kans, info op enemies, verborgen dingen).  
- **WILL** – Willpower (resist tegen mentale debuffs).  
- **MEM** – Memory (later: kennis checks, skill-learning).

### 3.4 Spiritueel (Kārana)

- **MAG** – Magic Power (kracht van spirituele hits/rituelen).  
- **PRA** – Prāṇa stat (bepaalt Max Prāṇa).  
- **RES** – Resistance (spirituele/elementale weerstand).  
- **INT** – Intuition (later: initiative, waarschuwingen).  
- **DEV** – Devotion (versterkt bepaalde buffs/rituelen).  
- **KAR** – Karma (meta-systeem; kleine combat-hooks later mogelijk).

---

## 4. Resources in combat

Elke unit heeft 4 resource-balken:

1. **HP** – gedeeld
2. **Stamina** – Physical resource
3. **Focus** – Mental resource
4. **Prāṇa** – Spiritual resource

### 4.1 Basisregels

- Een **skill** verbruikt **maximaal één resource-type** in v1 (later kunnen combinaties).  
- Basic Physical Attacks kosten óf niets, óf een heel klein beetje Stamina (tuning).  
- Resource-maxwaarden komen uit stats:
  - `MaxHP      = 30 + END * 6`  
  - `MaxStamina = 10 + END * 3`  
  - `MaxFocus   = 10 + FOC * 3`  
  - `MaxPrana   = PRA`  
- Regeneratie:
  - **Buiten combat:** langzaam herstel bij rust/pauze/overnacht.  
  - **In combat:** vooral via skills en items; eventueel lichte natuurlijke regen per beurt op lage waarden.

### 4.2 Resource-fantasie

- **Stamina** – je “spiervermoeidheid”: low = riskanter, minder sprinten, geen zware slagen meer.  
- **Focus** – je mentale bandbreedte: low = meer miss-chance, geen strakke debuffs/controle.  
- **Prāṇa** – je spirituele laadvermogen: low = geen grote rituelen, geen sterke heals/buffs.

---

## 5. P-M-S domeinen & damage types

We combineren Tri-lichamen met drie **damage types**:

- **Physical** – gebruikt STR/PhysAttack, verdedigd door DEF/Armor.  
- **Mental** – gebruikt FOC/MentAttack, verdedigd door MentDefense (WILL/INS).  
- **Spiritual** – gebruikt MAG/SpirAttack, verdedigd door SpirDefense (RES/DEV).

Subtypes (voor flavour & latere resistances):

- Physical: Sword / Spear / Axe / Bow / Blunt.
- Mental: Insight / Disruption / Illusion / Discipline.
- Spiritual: Light / Shadow / Fire / Water / Earth / Wind.

In v1 hoeft de game alleen het **hoofdtype** te gebruiken voor formules; subtypes zijn vooral tags.

---

## 6. Turn-structuur & flow

### 6.1 Basismodel (slice)

- Gevecht speelt zich af op een **grid** (bv. 8×8).  
- Turn-order per ronde: 
  1. **Player Phase** – alle player units mogen één keer handelen (in willekeurige volgorde).  
  2. **Enemy Phase** – alle enemies handelen volgens eenvoudige AI.  
- Win: alle vijanden KO.  
- Lose: hoofdpersonage KO (optioneel: party wipe).

Voor de vertical slice is dit **Fire Emblem-light**: geen individuele initiative-bar, geen speed-based volgorde. Later kan een **per-unit initiative-systeem** geïntroduceerd worden als dat past.

### 6.2 Acties per unit

Per beurt kan een unit typisch:

- **Move** – tot `MOV` tiles lopen.  
- **Attack** – basic fysieke aanval binnen wapenrange.  
- **Ability** – één skill (Physical / Mental / Spiritual).  
- **Item** – bijv. potion.  
- **Wait** – beurt bewust laten eindigen.

Voor v1: simpele FE-regel: **Move → (Attack/Ability/Item) → einde beurt**.

---

## 7. Afgeleide stats & formules (v1)

### 7.1 Aanval & verdediging

Afgeleide stats:

- `PhysAttack = STR * 2`  
- `MentAttack = FOC * 2`  
- `SpirAttack = MAG * 2`

- `PhysDefense = DEF`  
- `MentDefense = (WILL + INS) / 2` (afronden omlaag)  
- `SpirDefense = (RES + DEV) / 2`

### 7.2 Damage

**Physical basic attack / physical skill**

- `RawDamage = PhysAttack + WeaponPower - Target.PhysDefense`  
- `Damage    = max(1, RawDamage)`

**Mental skill**

- `RawDamage = MentAttack + SkillPower - Target.MentDefense`  
- `Damage    = max(1, RawDamage)`

**Spiritual skill**

- `RawDamage = SpirAttack + SkillPower - Target.SpirDefense`  
- `Damage    = max(1, RawDamage)`

Waarbij:

- `WeaponPower` uit wapen/equipment komt.  
- `SkillPower` op de skilldefinitie staat.

### 7.3 Accuracy & hit/miss

Eenvoudig model:

- `HitChance = 80 + (Attacker.ACC - Target.SPD) * 2 + SkillAccuracyBonus`
- Begrens: min 20%, max 95%.

Random 1–100 roll bepaalt hit/miss.

Crit-optie (mag in slice, maar hoeft niet):

- `CritChance = INS * 1%` (10 INS = 10%).  
- `CritDamageMultiplier = 1.5x of 2x`.

### 7.4 Status en resistances (placeholder)

- In de vertical slice: **geen complexe statuseffecten** (hooguit 1 simpele debuff/buff).  
- Later:
  - Mental skills → Fear, Confuse, Sleep, etc. (resist: WILL).  
  - Spiritual skills → Curse, Seal, Bless, etc. (resist: RES/DEV).

---

## 8. Klassen, rollen & Tri-profielen

Tri-Śarīra gebruikt **profielen** in plaats van harde klassen, maar voor leesbaarheid hanteren we wel **rol-etiketten**.

### 8.1 Tri-profiel

Per unit/klasse definiëren we een **GrowthWeights**:

- `GrowthWeights = (phys_weight, ment_weight, spir_weight)` (som ≈ 1.0)

Voorbeeld:

- **Warrior-type:** (0.6, 0.2, 0.2)  
- **Mystic-type:** (0.2, 0.2, 0.6)  
- **Disciple/balanced:** (0.4, 0.3, 0.3)

Profiel wordt gebruikt voor:

- **Startstats** (meer punten in dominante lichaam).  
- **Growth** per level (zie Tri-Śarīra Spec).  
- **Skill-aanbod** (welke skills passen bij wie?).

### 8.2 Rolverdeling (combatfantasie)

Enkele kernrollen:

- **Frontliner (Body-focus)**  
  - Hoge STR/END/DEF, matige MIND/SPIRIT.  
  - Skills: taunts, fysieke AOEs, guard.

- **Controller (Mind-focus)**  
  - Hoge ACC/FOC/INS, matige Body/Spirit.  
  - Skills: debuffs, hit-rate manipulatie, turn-order spel.

- **Caster/Healer (Spirit-focus)**  
  - Hoge MAG/PRA/DEV, zwakkere DEF/HP.  
  - Skills: heals, buffs, spirituele damage, cleanses.

- **Hybrid / Battle-monk (Body + Spirit)**  
  - Fysieke presence met rituele skills.  
  - Bv. *Flame Step* (Physical + Spiritual).

- **Skillful Rogue (Body + Mind)**  
  - Snel, hoge SPD/ACC, utility en precision strikes.

Rollen zijn **niet hard-coded**; ze ontstaan uit Tri-profiel + skill loadout.

---

## 9. Enemy design (vertical slice scope)

Voor de slice zijn 2–4 vijandtypes genoeg, elk met:

- 1 duidelijke Tri-focus (bijv. Body-brute, Mind-trickster, Spirit-wisp).  
- 1 basic attack + max. 1 eenvoudige ability.

Voorbeeldtypes:

1. **Forest Beast (Body)**  
   - Hoge HP/STR/DEF, lage MIND/SPIRIT.  
   - Doet pure Physical damage, leert de speler over Armor/DEF.

2. **Irritated Spirit (Spirit)**  
   - Lage HP, hoge MAG/RES/DEV.  
   - Doet Spiritual damage; leert speler over Prāṇa/Spirit-defense.

3. **Bandit Scout (Body+Mind)**  
   - Gemiddelde stats, hoge SPD/ACC.  
   - Kan een simpele debuff doen (bijv. verlagen van DEF of ACC).

4. **Mini-boss: Corrupted Guardian**  
   - Mix van Body+Spirit; 2–3 abilities (zware hit, spirituele aanval, zelfbuff).

---

## 10. Vertical Slice vs. volledige game

### 10.1 Vertical Slice – wat moet **nu** werken

- Grid-based combat met Player Phase / Enemy Phase.  
- Eén speelbaar character (later party), met:
  - HP, Stamina, Focus/Prāṇa, basisstats.  
  - 1 basic attack (Physical).  
  - 1–2 abilities (bijv. 1 Mental, 1 Spiritual).  
- 2–4 vijandtypes + 1 mini-boss.  
- Eenvoudige formules (zoals hierboven).  
- Simpele UI: HP + 1 resource zichtbaar, turn-indicatie, basic action-menu.

### 10.2 Latere uitbreiding

Later kunnen we toevoegen:

- Volledige **party** (2–4 units in slice 2, meer in eindgame).  
- Complexere AI (positionering, focus-fire, combo’s).  
- Status-effecten, stances, terrain-boni.  
- Initiative per unit (ACT-bar of SPD-gewogen turns).  
- Meer synergy tussen Tri-lichamen (bijv. combinatieskills, setups tussen Body/Mind/Spirit).

Architectuur/structuur uit de Solution Outline en Tri-Śarīra Spec hoeft daarvoor niet te veranderen; we voegen detail en breedte toe.

---

## 11. Relatie met andere artefacten

- **Tri-Śarīra System Spec** – definieert de volledige statset, resources, growthprofielen en helperformules.  
- **A2 – Vertical Slice Specificatie** – beschrijft welke content/combat-scope in de eerste demo moet zitten.  
- **2.3 NPC Cast & Fasen** – bepaalt welke companions en vijanden welke Tri-profielen krijgen.  
- **2.4 Quest Taxonomy & Voorbeeldlijst** – koppelt combat encounters aan questtypes (MSQ, Trials, CQs).  
- **3.3 NPC & Party System Spec** – legt vast hoe partyformatie, XP en level-up technisch werken.  
- **4.x Data & Schema’s** – `actors.json`, `enemies.json`, `skills.json` gebruiken de stats & formules uit dit document.

Versie 0.1 geeft een **volledige baseline** voor Combat & Stats. Tuning van getallen gebeurt later via playtests; structuur en gevoel zijn hier vastgelegd.