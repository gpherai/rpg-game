# 2.2 Kalender & Festivals Spec – Tri-Śarīra RPG

**Versie:** 0.1  
**Auteur:** Gerald (met Game Designer- & Architect-ondersteuning)  
**Status:** Design-spec op hoog niveau; namen/data zijn voorbeelden. Concrete kalenderdata en JSON-schema’s komen in 4.x Data & Schema’s.

---

## 1. Doel & reikwijdte

Deze spec beschrijft **hoe tijd werkt** in Tri-Śarīra RPG op designniveau:

- **Dag/nacht-cyclus** – hoe snel tijd gaat, welke segmenten we gebruiken, wat er verandert.
- **Seizoenen & kalender** – abstract jaarschema, seizoensverloop, basisstructuur van dagen.
- **Festivals & vaste events** – welke typen events er zijn en hoe ze aan tijd/plek zijn gekoppeld.
- **Integratie met systemen** – NPC-routines, quests, combat, save/load, post-game.

Technische details (TimeSystem API, events.schema.json, npc_schedules.schema.json) worden verder uitgewerkt in **3.x Systems Specs** en **4.x Data & Schema’s**.

---

## 2. Designprincipes

1. **Tijd als sfeer, niet als stress**  
   Tijd moet de wereld levend maken (NPC-routines, winkels, festivals), maar mag de speler niet constant straffen.

2. **Consistente laag, lichte complexiteit**  
   Dag/nacht en seizoenen zijn overal hetzelfde systeem. Regio’s kleuren het in met eigen festivals en schedules.

3. **Tri-Śarīra in de tijd**  
   - Body: fysiek zware seizoenen/activiteiten (oogst, woestijn, proeven).  
   - Mind: examendagen, debatten, politiek, studieperiodes.  
   - Spirit: rituelen, heilige dagen, voorouder- en devatā-festivals.

4. **Herhaling + unieke momenten**  
   - Er zijn **herhalende patronen** (markt, seizoensfestivals),  
   - én **unieke story-events** (eenmalige cosmo­logische samenstanden, eindbaas-events).

5. **Data-gedreven**  
   - Tijdcondities worden zoveel mogelijk vastgelegd in **JSON-events** (geen harde tijdlogica in code).

---

## 3. Tijdmodel – eenheid & schaal

### 3.1 Basis-eenheden (conceptueel)

We onderscheiden:

- **Tick** – kleinste update-eenheid (engine-level, niet in design gebruikt).  
- **Minuut (in-game)** – design-eenheid, afgeleid van ticks.  
- **Uur (in-game)** – 60 in-game minuten.  
- **Dag** – 24 in-game uren.  
- **Seizoen** – verzameling dagen (zie 4.2).  
- **Jaar** – 4 seizoenen (v0.1, uitbreidbaar later).

Voor gevoel:

- Richting: **1 in-game uur ≈ 1–2 minuten realtime** (tuning op basis van playtests).  
- Dag/nacht-cyclus moet merkbaar zijn in een normale speelsessie van 30–60 minuten.

### 3.2 Tijdrepresentatie in de game state

De globale `TimeState` bevat minimaal:

- `day_index` (int) – hoeveel dagen sinds game-start (0-based).  
- `time_of_day` (float of int) – b.v. 0.0–24.0 of 0–1439 minuten.  
- `season_index` (int) – 0–3 (Lente, Zomer, Herfst, Winter).  
- Optioneel: `year_index` als we jaren expliciet willen bijhouden.

Deze waarden worden opgeslagen in **savegame** en gebruikt door NPC’s, events en quests.

---

## 4. Dag & nacht – segmenten en effecten

### 4.1 Segmenten

De dag is op designniveau verdeeld in vier **tijdsegmenten** (time bands):

1. **Dageraad (DAWN)** – vroege ochtend, licht stijgt.  
2. **Dag (DAY)** – heldere uren, meeste winkels en publieke activiteit.  
3. **Schemer (DUSK)** – overgangsperiode; sommige wezens worden actief, anderen keren terug.  
4. **Nacht (NIGHT)** – duisternis, speciale encounters en rituelen.

Voor v0.1 (voorbeeld, nog tunable):

- DAWN: 05:00–08:00  
- DAY: 08:00–18:00  
- DUSK: 18:00–21:00  
- NIGHT: 21:00–05:00

In data gebruiken we bijvoorbeeld:

```json
"time_band": "DAY" // of DAWN, DUSK, NIGHT
```

### 4.2 Visuele & auditieve effecten

Per time band kunnen we configureren:

- **Licht / tint** (overworld): b.v. color overlay, brightness, contrast.  
- **Ambient geluid / muziek**: andere tracks of laagjes per band.  
- Mogelijke **UI-indicator** (klein icoontje/klokje) zodat de speler weet wat er speelt.

### 4.3 Gameplay-effecten

Dag/nacht beïnvloedt o.a.:

- **NPC-schedules** – waar NPC’s zijn, of een winkel open is, welke dialogen beschikbaar zijn.
- **Encounter-tables** – welke vijanden in random encounters verschijnen.  
- **Event-triggers** – bepaalde cutscenes, festivals of mini-events starten alleen in specifieke time-bands.
- **Rituelen** – sommige rituelen kunnen alleen bij dag/nacht/dageraad worden uitgevoerd.

---

## 5. Seizoenen & kalenderstructuur

### 5.1 Seizoenen (v0.1)

Voor v0.1 gebruiken we **vier seizoenen** met werktitels:

1. **Vasanta** – lente: groei, vernieuwing.  
2. **Grīṣma** – zomer: hitte, uitdroging, reizen.  
3. **Śarada** – herfst: oogst, balansherstel.  
4. **Hemanta** – winter: verstilling, introspectie.

Elke seizoen krijgt:

- **Audio/visuele accenten** (kleurpalet, weer, muziek).  
- **Lichte mechanische verschillen** (bepaalde monsters/regio’s vaker, andere items in shops).  
- **Eigen festivals** en season-only quests.

### 5.2 Lengte & overgang

Basismodel (nog tunable):

- 1 seizoen = 30 in-game dagen.  
- 1 jaar = 4 seizoenen = 120 dagen.

Overgangen:

- Bij omslag naar nieuwe seizoen: globale flag, mogelijke **wereldwijde mini-events** (andere tiles, aangepaste NPC-lijnen, seizoensgebonden shops).

### 5.3 Kalenderdagen

We onderscheiden op designniveau drie dagtypen:

1. **Normale dagen** – standaard gedrag; alleen dag/nacht en seizoensinvloeden.  
2. **Marktdagen / lokale ritmedagen** – terugkerende patronen (bv. 1x per 7 dagen markt in een hub).  
3. **Festival- & heilige dagen** – speciale events, zie sectie 6.

In data kunnen we bijvoorbeeld gebruiken:

```json
"day_type": "NORMAL" // of MARKET, FESTIVAL
```

---

## 6. Festivals & vaste events – typologie

### 6.1 Eventtypen

We onderscheiden de volgende types **tijdgebonden events**:

1. **Lokale dagelijkse/wekelijkse patronen**  
   - Markt op een vaste weekdag, training in dojo, studie-bijeenkomsten.

2. **Seizoensfestivals (regionaal)**  
   - 1–3 per regio per seizoen.  
   - Bv. oogstfeest, lichtfeest, herdenkingsdag, devatā-festivals.

3. **Wereldwijde heilige dagen**  
   - Zeldzamer, overal merkbaar (muziek, NPC-lijnen) maar vooral in key-regio’s geactiveerd.  
   - Koppelen aan hoofdverhaal of Tri-Proeven.

4. **Unieke story-events (one-shot)**  
   - Gebeuren eenmalig, vaak getriggerd door story-progressie + tijdconditie.  
   - Bv. een eclips, een invasie, een ritueel dat de wereld blijvend verandert.

5. **Post-game & NG+ events**  
   - Trials, ultra-bosses, speciale festivals die alleen na de main story beschikbaar zijn.

### 6.2 Festivalparameters (conceptueel datamodel)

Een festival/event heeft minimaal:

- `id`: unieke naam/key.
- `name`: schermnaam.  
- `region_id`: waar het primair plaatsvindt (of `GLOBAL`).  
- `tri_focus`: `"BODY" | "MIND" | "SPIRIT" | "MIX"`.
- `event_type`: `"SEASONAL" | "HOLY_DAY" | "UNIQUE" | "POSTGAME"` etc.
- `season_index`: in welk seizoen (of `null` bij unieke events).
- `day_in_season`: op welke dag van het seizoen (of condition-based).  
- `time_band`: in welk dagsegment (of meerdere).  
- `repeat_rule`: `"ANNUAL"`, `"ONCE_PER_SAVE"`, etc.
- `location_triggers`: lijst van concrete plaatsen (map + coördinaten/event-id’s).
- `requirements`: storyflags, karma/dharma-vereisten, companions aanwezig/afwezig.
- `effects`:
  - quests die starten/advance/complete,  
  - shop modifiers (kortingen, speciale items),  
  - NPC-schedule overrides (iedereen op het plein),  
  - tijdelijke buffs/debuffs, minigames.

Dit wordt concreter in **events.schema.json**.

### 6.3 Voorbeeld – lokaal festival in Chandrapur (concept)

> **Naam:** Dipotsava (lichtfeest, werktitel)  
> **Regio:** R1 – Chandrapur & omgeving  
> **Tri-fokus:** SPIRIT ≥ MIND

- `season_index`: Śarada (herfst).  
- `day_in_season`: 20 (vb.).  
- `time_band`: DUSK → NIGHT.  
- `repeat_rule`: ANNUAL.  
- `requirements`: chapter ≥ 1, lokale shrine hersteld.
- `effects`:
  - Chandrapur-hub gebruikt speciale tiles (lampjes, vuur, versieringen).  
  - Extra dialogen over voorouders, hoop, eerdere gebeurtenissen.  
  - Tijdelijke **festival-shop** met zeldzame items.  
  - 1–2 festival-miniquests (bv. lampen ontsteken, iemand helpen bij offer).  
  - Kleine Spirit-buff als je deelneemt aan ritueel.

---

## 7. Integratie met NPC’s, quests en systemen

### 7.1 NPC-schedules

NPC’s hebben per **dagtype** en **time band** een schedule-entry:

- Waar ze zijn (map + coördinaat/route).  
- Welke animatie/rol ze hebben (werk, rust, ritueel, festivaldeelname).  
- Welke dialogen beschikbaar zijn.

Tijdens festivals:

- Normale schedules worden deels overstemd door **festival-schedule overrides**.  
- Sommige NPC’s kunnen alleen tijdens deze periodes worden aangesproken voor specifieke quests.

### 7.2 Quests & kalender

Quests kunnen **tijdgebonden condities** hebben:

- Startbaar alleen in specifieke seizoenen of tijdens festivals.  
- Deadline (bijv. “voor het einde van de lente”).  
- Andere uitkomst als je een quest pas na een bepaald festival afrondt.

Belangrijk: tijdslimieten worden spaarzaam gebruikt en **nooit** voor cruciale main-storyprogressie; eerder voor variatie in sidequest-uitkomsten.

### 7.3 Combat & encounters

Encounter-tables kunnen per regio variëren op basis van:

- `time_band` – nachtmonsters vs dagdieren.  
- `season_index` – andere fauna/flora per seizoen.  
- `festival` – speciale encounters tijdens heilige dagen (friendly spirits, ritual guardians).

---

## 8. Post-game & NG+ – tijd als endgame-laag

In de post-game krijgt tijd extra gewicht:

- **Trials of the Soul** en ultra-hard bosses die alleen verschijnen:
  - in een specifiek seizoen,  
  - tijdens een zeldzaam festival,  
  - of bij combinatie van tijd + storyflag.
- **Avatar Summons**-ketens die gekoppeld zijn aan *meerjarige* cycli (b.v. alleen beschikbaar na X in-game jaren / een bepaald patroon van deelnames aan festivals).
- NG+ kan **snellere tijd** of extra festivalvarianten introduceren om herhaalbaarheid te vergroten.

---

## 9. Vertical Slice vs. volledige game

### 9.1 Vertical Slice (VS1) – minimale tijdlaag

Voor de eerste vertical slice is de tijdlaag **bewust beperkt**:

- Eenvoudige **dag → avond → nacht**-cyclus (2–3 bands i.p.v. 4).  
- Geen volledig seizoensysteem; `season_index` kan hard-coded zijn.  
- Eén **lokaal mini-event** (bijv. een avondritueel bij de shrine) als proof-of-concept.

Doel: tonen dat NPC-schedules, licht/muziek en encounters reageren op tijd.

### 9.2 Uitbreiding naar volledige game

Na VS1 wordt:

- het seizoensysteem geactiveerd,  
- festivals per regio uitgewerkt,  
- quest- en NPC-systemen gekoppeld aan de kalender.

---

## 10. Relatie tot andere artefacten

Deze spec hangt direct samen met:

- **2.1 World & Regions Overview** – definieert per regio wat de rol is, welke festivals/focus logisch zijn.  
- **2.3 NPC Cast & Fasen** – NPC’s gebruiken dag/nacht + dagtype voor hun schedules; festivals bepalen bijzondere fasen.  
- **2.4 Quest Taxonomy & Voorbeeldlijst** – definieert welke questtypen tijdgebonden zijn en hoe.  
- **3.x Systems Specs (TimeSystem, Events, NPCSchedules)** – implementatie van `TimeState`, event-evaluatie en schedule-evaluatie.  
- **4.x Data & Schema’s** – `events.schema.json`, `npc_schedules.schema.json`, `savegame.schema.json` slaan tijdgerelateerde informatie op.

Versie 0.1 legt de **kaders** voor tijd, seizoenen en festivals vast. Concrete lijsten van festivals, exacte daglengtes en tuningparameters worden later ingevuld op basis van playtests en lore-afstemming.

